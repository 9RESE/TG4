# WebSocket Paper Trading Tester - Configuration
# Default configuration file

# General settings
general:
  duration_minutes: 60        # How long to run
  interval_ms: 100           # Main loop interval
  starting_capital: 100.0    # USDT per strategy

# Starting asset holdings (in addition to USDT capital)
# Goal: Grow holdings of both XRP and BTC through ratio trading
starting_assets:
  XRP: 500.0                  # 500 XRP starting balance
  BTC: 0.0                    # Will accumulate through XRP/BTC trading

# Symbols to trade
# Kraken WebSocket v2 uses slash format: BTC/USDT, XRP/USDT, XRP/BTC
symbols:
  - XRP/USDT
  - BTC/USDT
  - XRP/BTC                   # Ratio trading to grow both XRP and BTC

# Data source
data:
  source: kraken              # 'kraken' or 'simulated'
  ws_url: wss://ws.kraken.com/v2
  reconnect_delay: 1.0
  max_reconnect_delay: 60.0

# Execution settings
execution:
  fee_rate: 0.001            # 0.1%
  slippage_rate: 0.0005      # 0.05%
  max_short_leverage: 2.0    # Maximum leverage for short positions (2x default)
  max_long_leverage: 1.5     # Maximum leverage for long positions (1.5x default, conservative)

# Dashboard settings
dashboard:
  enabled: true
  host: 127.0.0.1
  port: 8787

# Logging settings
logging:
  base_dir: logs
  buffer_size: 100
  enable_aggregated: true
  console_output: true

# Regime Detection Configuration
# See docs/development/features/regime_detection/ for details
regime_detection:
  enabled: true

  # Indicator weights for composite scoring (must sum to 1.0)
  weights:
    adx: 0.25            # ADX for trend strength
    chop: 0.20           # Choppiness Index for trend/range detection
    ma: 0.20             # MA alignment for trend direction
    rsi: 0.15            # RSI for momentum
    volume: 0.10         # Volume analysis
    sentiment: 0.10      # External sentiment (Fear & Greed)

  # Classification thresholds
  thresholds:
    strong_bull: 0.5     # Composite score > 0.5 = Strong Bull
    bull: 0.2            # Score > 0.2 = Bull
    bear: -0.2           # Score < -0.2 = Bear
    strong_bear: -0.5    # Score < -0.5 = Strong Bear

  # Hysteresis settings (prevent rapid regime switching)
  min_regime_duration: 60      # Minimum seconds before regime can change
  confirmation_bars: 3         # Consecutive bars required to confirm change
  smoothing_period: 3          # Score smoothing window

  # External data settings
  external_enabled: true       # Enable Fear & Greed / BTC Dominance fetching
  cache_ttl_minutes: 5         # How long to cache external data

  # Multi-timeframe analysis
  mtf_weights:
    4h: 5
    1h: 4
    15m: 3
    5m: 2
    1m: 1

# Strategy overrides (optional)
# Override default strategy config values
strategy_overrides:
  market_making:
    min_spread_pct: 0.05        # Lowered from 0.1
    position_size_usd: 20

  order_flow:
    imbalance_threshold: 0.3
    position_size_usd: 25
    vpin_high_threshold: 0.85   # Raised from 0.7 - less conservative
    lookback_trades: 30         # Lowered from 50 - faster warmup

  ratio_trading:
    max_spread_pct: 0.25        # Raised from 0.10 - allow wider spreads
    min_net_profit_pct: 0.05    # Lowered from 0.10 - more permissive
    use_fee_profitability_check: false  # Disable fee check for XRP/BTC

  wavetrend:
    wt_overbought: 40           # Lowered from 53 - reach zones faster
    wt_oversold: -40            # Raised from -53
    min_candle_buffer: 30       # Lowered from 50 - faster warmup
    cooldown_seconds: 30        # Lowered from 60

  mean_reversion:
    lookback_candles: 20
    deviation_threshold: 0.5

  whale_sentiment:
    min_candle_buffer: 150          # Reduced from 300 for faster warmup in testing
    cooldown_seconds: 60            # Reduced from 120 for more signals
    volume_spike_mult: 1.8          # Slightly lower threshold
    contrarian_mode: true           # Buy fear, sell greed

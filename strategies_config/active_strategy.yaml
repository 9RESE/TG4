# Strategy Configuration
# Phase 16: Tuned Parameters for Dec 2025
#
# active: The strategy to use for live trading
# strategies: Configuration for each available strategy

active: defensive_yield  # KEEP THIS FOR LIVE - defensive_yield is battle-tested

strategies:
  # LIVE STRATEGY - Do not modify without thorough backtesting
  defensive_yield:
    enabled: true
    max_leverage: 10
    description: "RL-driven defensive strategy with yield accrual"
    notes:
      - "Defensive mode: Park USDT during high volatility (ATR > 4%)"
      - "Offensive mode: Deploy leverage on confirmed dips"
      - "Bear mode: Selective shorts on overbought rips"
      - "Auto-yield: 6.5% avg APY on parked USDT"

  # Phase 17 TUNED - Balanced aggression
  mean_reversion_vwap:
    enabled: true
    symbol: "XRP/USDT"

    # Phase 17 Tuning - Balanced (slightly looser than Phase 16)
    dev_threshold: 0.003        # 0.3% - keep tight for quality signals
    rsi_oversold: 35            # (was 32) - slightly relaxed
    rsi_overbought: 65          # (was 68) - slightly relaxed
    max_leverage: 5             # 5x - conservative leverage
    stop_loss_pct: 0.04         # 4% stop loss

    # Volume filter
    volume_filter: true
    volume_mult: 1.3            # (was 1.5) Slightly relaxed
    volume_window: 20

    # Standard params
    vwap_window: 14
    rsi_window: 14
    long_size: 0.10             # Conservative 10%
    short_size: 0.08            # Conservative 8%

    description: "VWAP + RSI mean reversion - Phase 17 balanced"
    notes:
      - "Long: RSI < 35 AND price 0.3%+ below VWAP AND vol > 1.3x"
      - "Short: RSI > 65 AND price 0.3%+ above VWAP AND vol > 1.3x"
      - "Target: 3-8% monthly with controlled risk"

  # Phase 16 TUNED - Ready for live testing
  xrp_btc_pair_trading:
    enabled: true
    xrp_symbol: "XRP/USDT"
    btc_symbol: "BTC/USDT"

    # Phase 16 Tuning
    lookback: 336               # 2 weeks (was 168) - more stable hedge
    entry_z: 1.8                # (was 2.0) - earlier signals
    exit_z: 0.5
    stop_z: 3.0
    coint_pvalue_threshold: 0.10  # (was 0.05) - relaxed cointegration

    # BTC momentum filter
    use_btc_filter: true
    btc_rsi_window: 14
    hedge_recalc_period: 24     # Recalculate hedge ratio daily

    # Standard params
    max_leverage: 10
    position_size_pct: 0.10

    description: "XRP/BTC cointegration stat arb - Phase 16 tuned"
    notes:
      - "Entry: Z > 1.8 + BTC RSI > 50 (short XRP/long BTC)"
      - "Entry: Z < -1.8 + BTC RSI < 50 (long XRP/short BTC)"
      - "BTC filter ensures momentum alignment"
      - "Target: Sharpe > 1.5 on divergences"

# Phase 16 Ensemble Notes:
# RL agent will weight strategies dynamically:
# - Mean Reversion (chop regime): High weight in $2.00-2.20 range
# - Pair Trading (divergence regime): Activate on XRP news/BTC weakness
# - Defensive (grind-down): Max weight during high ATR + fear
